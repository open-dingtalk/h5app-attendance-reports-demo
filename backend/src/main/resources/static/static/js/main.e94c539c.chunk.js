(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{133:function(t,e,n){},134:function(t,e,n){},460:function(t,e,n){"use strict";n.r(e);var s=n(0),a=n.n(s),i=n(38),c=n.n(i),r=(n(133),n(134),n(61)),d=n.n(r),o=n(96),l=n(2),u=n(13),m=n(14),h=n(16),j=n(15),f=n(45),g=n(463),I=n(86),p=n.n(I),b=n(26),O=p()().subtract(7,"days").format("YYYY-MM-DD"),v=[{title:"\u7528\u6237",dataIndex:"userId",key:"userId",render:function(t){return sessionStorage.userId}},{title:"\u6253\u5361\u7c7b\u578b",dataIndex:"checkType",key:"checkType"},{title:"\u6253\u5361\u5730\u5740",dataIndex:"userAddress",key:"userAddress"},{title:"\u6253\u5361\u65f6\u95f4",dataIndex:"userCheckTime",key:"userCheckTime"}],x=[{title:"id",dataIndex:"id",key:"id"},{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u8be6\u7ec6\u8bb0\u5f55",dataIndex:"columnVals",key:"columnVals",render:function(t){return t.map((function(t){return Object(b.jsxs)("p",{children:["\u65e5\u671f\uff1a",p()(t.date).format("YYYY-MM-DD HH:MM:SS")," --"," ",t.value]})}))}}],y=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).getAttendanceIntelligenceReports=function(){var t=sessionStorage.getItem("userId");s.setState(Object(l.a)(Object(l.a)({},s.state),{},{items:null})),d.a.get(k+"/attendance/intelligence?userId="+t+"&fromDate="+O+"&toDate="+p()().format("YYYY-MM-DD")).then((function(t){s.setState(Object(l.a)(Object(l.a)({},s.state),{},{ListItem:t.data.data}))})).catch((function(t){console.log(t.message)}))},s.getAttendanceReports=function(){s.setState(Object(l.a)(Object(l.a)({},s.state),{},{ListItem:null}));var t=sessionStorage.getItem("userId");d.a.get(k+"/attendance?userId="+t+"&workDate="+O).then((function(t){s.setState({items:t.data.data.attendanceResultList||[],isLoaded:!0})})).catch((function(t){alert(JSON.stringify(t))}))},s.state={items:null,ListItem:null,isLoaded:!1},s}return Object(m.a)(n,[{key:"render",value:function(){var t,e,n,s;return Object(b.jsxs)("div",{className:"btn",children:[Object(b.jsx)("p",{children:Object(b.jsx)(f.a,{onClick:this.getAttendanceReports,type:"primary",children:"\u83b7\u53d67\u5929\u5185\u7528\u6237\u8003\u52e4\u4fe1\u606f"})}),Object(b.jsx)("p",{children:Object(b.jsx)(f.a,{type:"primary",onClick:this.getAttendanceIntelligenceReports,children:"\u83b7\u53d6\u7528\u6237\u667a\u80fd\u8003\u52e4\u7edf\u8ba1\u4fe1\u606f"})}),(null===(t=this.state.items)||void 0===t?void 0:t.length)>0&&Object(b.jsx)(g.a,{columns:v,dataSource:this.state.items,style:{overflowX:"scroll"}}),0===(null===(e=this.state.items)||void 0===e?void 0:e.length)&&Object(b.jsx)("div",{children:"\u6682\u65e07\u5929\u5185\u8003\u52e4\u4fe1\u606f\uff0c\u8bd5\u8bd5\u5728\u9489\u9489\u8003\u52e4\u6253\u5361\u5427"}),(null===(n=this.state.ListItem)||void 0===n?void 0:n.length)>0&&Object(b.jsx)(g.a,{columns:x,dataSource:this.state.ListItem,style:{overflowX:"scroll"}}),0===(null===(s=this.state.ListItem)||void 0===s?void 0:s.length)&&Object(b.jsx)("div",{children:"\u6682\u65e0\u667a\u80fd\u8003\u52e4\u7edf\u8ba1\u6570\u636e\uff0c\u8bd5\u8bd5\u5728oa\u540e\u53f0\u521b\u5efa\u8003\u52e4\u62a5\u8868\u5427"})]})}}]),n}(a.a.Component),k="";o.ready((function(){var t;fetch(k+"/config").then((function(t){return t.json()})).then((function(e){t=e.data.corpId,o.runtime.permission.requestAuthCode({corpId:t,onSuccess:function(t){d.a.get(k+"/login?authCode="+t.code).then((function(t){sessionStorage.setItem("userId",t.data.data.userid),sessionStorage.setItem("deptId",t.data.data.deptIdList[0])})).catch((function(t){alert(JSON.stringify(t))}))},onFail:function(t){alert(JSON.stringify(t))}})}))}));var S=function(){return Object(b.jsxs)("div",{className:"content",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png",className:"headImg",alt:""}),"\u9489\u9489\u6a21\u677f"]}),Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(y,{})})]})};n(459);c.a.render(Object(b.jsx)(S,{}),document.getElementById("root"))}},[[460,1,2]]]);
//# sourceMappingURL=main.e94c539c.chunk.js.map